{"ast":null,"code":"var _jsxFileName = \"/home/niraj/Desktop/Projects/quick-recipes/client/src/components/Recipe.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { storage } from \"../db/appwriteConfig\";\nimport Login from \"./Login\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Recipe = ({\n  loggedIn\n}) => {\n  _s();\n\n  const [recipes, setRecipes] = useState([]);\n  const [recipeImage, setRecipeImage] = useState(null);\n  const [newRecipe, setNewRecipe] = useState({\n    name: \"\",\n    ingredients: \"\",\n    recipe: \"\"\n  });\n  const [error, setError] = useState(\"\");\n  const [success, setSuccess] = useState(\"\");\n  const [updateDetails, setUpdateDetails] = useState({\n    status: false,\n    id: \"\"\n  });\n  const [updateValue, setUpdateValue] = useState({\n    name: \"\",\n    ingredients: \"\",\n    recipe: \"\"\n  });\n  useEffect(() => {\n    axios.get(\"http://localhost:5000/api/v1/getRecipes\").then(({\n      data\n    }) => {\n      setRecipes(data.documents);\n    }).catch(err => {\n      console.log(err);\n    });\n  }, []);\n  console.log(recipes);\n\n  const createNewRecipe = e => {\n    e.preventDefault();\n    const details = JSON.stringify(newRecipe);\n    const data = new FormData();\n    data.append(\"details\", details);\n    data.append(\"image\", recipeImage);\n    axios.post(\"http://localhost:5000/api/v1/createRecipe\", data).then(res => {\n      console.log(res.data);\n      setSuccess(\" New Recipe added Successfully !\");\n    }).catch(err => {\n      setError(\"Failed to add new Recipe !\");\n      console.log(err);\n    });\n    setNewRecipe({\n      name: \"\",\n      ingredients: \"\",\n      recipe: \"\"\n    });\n    setError(\"\");\n    setSuccess(\"\");\n    setRecipeImage(null);\n    e.target.value = null;\n    window.location.reload(false);\n  };\n\n  const deleteRecipe = (docId, imageId) => {\n    axios.delete(`http://localhost:5000/api/v1/deleteRecipe/${docId}`).then(res => {\n      alert(\"Recipe Deleted Successfully !\");\n      storage.deleteFile(imageId).then(() => {\n        window.location.reload(false);\n      }).catch(err => {\n        console.log(err);\n      });\n    }).catch(err => {\n      alert(\"Uh Oh!, Error Occured : Recipe Could not be deleted !\");\n    });\n  };\n\n  const updateRecipe = e => {\n    e.preventDefault();\n    axios.patch(`http://localhost:5000/api/v1/updateRecipe/${updateDetails.id}`, updateValue).then(updatedRecipe => {\n      console.log(updatedRecipe);\n      setSuccess(\"Recipe updated successfully!\");\n    }).catch(err => {\n      setError(\"Uh Oh!, Error Occured : Recipe Could not be updated \");\n    });\n    setUpdateValue({\n      name: \"\",\n      ingredients: \"\",\n      recipe: \"\"\n    });\n    setError(\"\");\n    setSuccess(\"\");\n    setUpdateDetails({ ...updateDetails,\n      status: false\n    });\n    window.location.reload(false);\n  }; //MAKES THE UPDATE FORM SO THAT USERS CAN EDIT THE EXISTING DATA\n\n\n  const updateForm = data => {\n    setUpdateValue({\n      name: data.name,\n      ingredients: data.ingredients,\n      recipe: data.recipe\n    });\n  };\n\n  const newOnChange = (e, changedValue) => {\n    setNewRecipe({ ...newRecipe,\n      [changedValue]: e.target.value\n    });\n  };\n\n  const updateOnChange = (e, changedValue) => {\n    setUpdateValue({ ...updateValue,\n      [changedValue]: e.target.value\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Login, {\n        logStatus: loggedIn\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"container-lg my-10\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: updateDetails.status ? \"Update Recipe\" : \"Create Recipe\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            for: \"exampleInputEmail1\",\n            children: \"Food Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            className: \"form-control\",\n            id: \"name\",\n            name: \"name\",\n            required: true,\n            \"aria-describedby\": \"emailHelp\",\n            value: updateDetails.status ? updateValue.name : newRecipe.name,\n            onChange: updateDetails.status ? e => {\n              updateOnChange(e, \"name\");\n            } : e => {\n              newOnChange(e, \"name\");\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            for: \"exampleInputPassword1\",\n            children: \"Ingredients\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            value: updateDetails.status ? updateValue.ingredients : newRecipe.ingredients,\n            required: true,\n            type: \"text\",\n            name: \"ingredients\",\n            className: \"form-control\",\n            id: \"ingredients\",\n            onChange: updateDetails.status ? e => {\n              updateOnChange(e, \"ingredients\");\n            } : e => {\n              newOnChange(e, \"ingredients\");\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            for: \"exampleFormControlTextarea1\",\n            children: \"Recipe\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            required: true,\n            name: \"recipe\",\n            class: \"form-control\",\n            id: \"recipe\",\n            value: updateDetails.status ? updateValue.recipe : newRecipe.recipe,\n            rows: \"3\",\n            onChange: updateDetails.status ? e => {\n              updateOnChange(e, \"recipe\");\n            } : e => {\n              newOnChange(e, \"recipe\");\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            for: \"recipe-image\",\n            children: \"Upload Food's Image\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            name: \"image\",\n            className: \"form-control-file\",\n            id: \"image\",\n            onChange: e => {\n              const image = e.target.files[0];\n              setRecipeImage(image);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: error && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-danger\",\n            children: [\" \", error, \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 26\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: success && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-success\",\n            children: [\" \", success, \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 28\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-primary\",\n          onClick: updateDetails.status ? e => {\n            updateRecipe(e);\n          } : e => {\n            createNewRecipe(e);\n          },\n          children: updateDetails.status ? \"Update the Recipe\" : \"Add New Recipe\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Recipes\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"table table-bordered\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            className: \"thead-dark\",\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                children: \" Food Preview \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 264,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                children: \"Food Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 265,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                children: \"Ingredients\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 266,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                children: \"Recipe\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 267,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                children: \"Actions\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 268,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: recipes.map(recipe => /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: storage.getFilePreview(recipe.image, 150, 100),\n                  alt: \"recipe\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 275,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 274,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: recipe.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 280,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: recipe.ingredients\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 281,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: recipe.recipe\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 282,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"d-flex border-bottom-0 border-right-0 border-left-0\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => deleteRecipe(recipe.$id, recipe.image),\n                  type: \"button\",\n                  class: \"btn btn-danger mx-1\",\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    class: \"fas fa-trash \"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 290,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 285,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => {\n                    setUpdateDetails({\n                      status: true,\n                      id: recipe.$id\n                    });\n                    updateForm(recipe);\n                  },\n                  type: \"button\",\n                  class: \"btn btn-success mx-1\",\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    class: \"fas fa-pen\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 303,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 292,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 284,\n                columnNumber: 19\n              }, this)]\n            }, recipe.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 144,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Recipe, \"lXXh8ourbtYDKP9A+gP48inX5do=\");\n\n_c = Recipe;\nexport default Recipe;\n\nvar _c;\n\n$RefreshReg$(_c, \"Recipe\");","map":{"version":3,"sources":["/home/niraj/Desktop/Projects/quick-recipes/client/src/components/Recipe.jsx"],"names":["React","useState","useEffect","axios","storage","Login","Recipe","loggedIn","recipes","setRecipes","recipeImage","setRecipeImage","newRecipe","setNewRecipe","name","ingredients","recipe","error","setError","success","setSuccess","updateDetails","setUpdateDetails","status","id","updateValue","setUpdateValue","get","then","data","documents","catch","err","console","log","createNewRecipe","e","preventDefault","details","JSON","stringify","FormData","append","post","res","target","value","window","location","reload","deleteRecipe","docId","imageId","delete","alert","deleteFile","updateRecipe","patch","updatedRecipe","updateForm","newOnChange","changedValue","updateOnChange","image","files","map","getFilePreview","$id"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport {  storage } from \"../db/appwriteConfig\";\nimport Login from \"./Login\";\n\nconst Recipe = ({loggedIn}) => {\n  const [recipes, setRecipes] = useState([]);\n  const [recipeImage, setRecipeImage] = useState(null);\n  const [newRecipe, setNewRecipe] = useState({\n    name: \"\",\n    ingredients: \"\",\n    recipe: \"\",\n  });\n  const [error, setError] = useState(\"\");\n  const [success, setSuccess] = useState(\"\");\n\n  const [updateDetails, setUpdateDetails] = useState({\n    status: false,\n    id: \"\",\n  });\n\n  const [updateValue, setUpdateValue] = useState({\n    name: \"\",\n    ingredients: \"\",\n    recipe: \"\",\n  });\n\n  useEffect(() => {\n    axios\n      .get(\"http://localhost:5000/api/v1/getRecipes\")\n      .then(({ data }) => {\n        setRecipes(data.documents);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }, []);\n  console.log(recipes);\n\n  const createNewRecipe = (e) => {\n    e.preventDefault();\n\n    const details = JSON.stringify(newRecipe);\n\n    const data = new FormData();\n    data.append(\"details\", details);\n    data.append(\"image\", recipeImage);\n\n    axios\n      .post(\"http://localhost:5000/api/v1/createRecipe\", data)\n      .then((res) => {\n        console.log(res.data);\n        setSuccess(\" New Recipe added Successfully !\");\n      })\n      .catch((err) => {\n        setError(\"Failed to add new Recipe !\");\n        console.log(err);\n      });\n\n    setNewRecipe({\n      name: \"\",\n      ingredients: \"\",\n      recipe: \"\",\n    });\n    setError(\"\");\n    setSuccess(\"\");\n    setRecipeImage(null);\n    e.target.value = null;\n    window.location.reload(false);\n  };\n\n  const deleteRecipe = (docId, imageId) => {\n    axios\n      .delete(`http://localhost:5000/api/v1/deleteRecipe/${docId}`)\n      .then((res) => {\n        alert(\"Recipe Deleted Successfully !\");\n        storage\n          .deleteFile(imageId)\n          .then(() => {\n            window.location.reload(false);\n          })\n          .catch((err) => {\n            console.log(err);\n          });\n      })\n      .catch((err) => {\n        alert(\"Uh Oh!, Error Occured : Recipe Could not be deleted !\");\n      });\n  };\n\n  const updateRecipe = (e) => {\n    e.preventDefault();\n    axios\n      .patch(\n        `http://localhost:5000/api/v1/updateRecipe/${updateDetails.id}`,\n        updateValue\n      )\n      .then((updatedRecipe) => {\n        console.log(updatedRecipe);\n        setSuccess(\"Recipe updated successfully!\");\n      })\n      .catch((err) => {\n        setError(\"Uh Oh!, Error Occured : Recipe Could not be updated \");\n      });\n\n    setUpdateValue({\n      name: \"\",\n      ingredients: \"\",\n      recipe: \"\",\n    });\n    setError(\"\");\n    setSuccess(\"\");\n    setUpdateDetails({\n      ...updateDetails,\n      status: false,\n    });\n    window.location.reload(false);\n  };\n\n  //MAKES THE UPDATE FORM SO THAT USERS CAN EDIT THE EXISTING DATA\n  const updateForm = (data) => {\n    setUpdateValue({\n      name: data.name,\n      ingredients: data.ingredients,\n      recipe: data.recipe,\n    });\n  };\n\n  const newOnChange = (e, changedValue) => {\n    setNewRecipe({\n      ...newRecipe,\n      [changedValue]: e.target.value,\n    });\n  };\n\n  const updateOnChange = (e, changedValue) => {\n    setUpdateValue({\n      ...updateValue,\n      [changedValue]: e.target.value,\n    });\n  };\n\n  return (\n    <div>\n      <div>\n       \n       \n        <Login logStatus={loggedIn} />\n        <form className=\"container-lg my-10\">\n          <h2>{updateDetails.status ? \"Update Recipe\" : \"Create Recipe\"}</h2>\n          <div className=\"form-group\">\n            <label for=\"exampleInputEmail1\">Food Name</label>\n            <input\n              type=\"text\"\n              className=\"form-control\"\n              id=\"name\"\n              name=\"name\"\n              required\n              aria-describedby=\"emailHelp\"\n              value={updateDetails.status ? updateValue.name : newRecipe.name}\n              onChange={\n                updateDetails.status\n                  ? (e) => {\n                      updateOnChange(e, \"name\");\n                    }\n                  : (e) => {\n                      newOnChange(e, \"name\");\n                    }\n              }\n            />\n          </div>\n          <div className=\"form-group\">\n            <label for=\"exampleInputPassword1\">Ingredients</label>\n            <input\n              value={\n                updateDetails.status\n                  ? updateValue.ingredients\n                  : newRecipe.ingredients\n              }\n              required\n              type=\"text\"\n              name=\"ingredients\"\n              className=\"form-control\"\n              id=\"ingredients\"\n              onChange={\n                updateDetails.status\n                  ? (e) => {\n                      updateOnChange(e, \"ingredients\");\n                    }\n                  : (e) => {\n                      newOnChange(e, \"ingredients\");\n                    }\n              }\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label for=\"exampleFormControlTextarea1\">Recipe</label>\n            <textarea\n              required\n              name=\"recipe\"\n              class=\"form-control\"\n              id=\"recipe\"\n              value={\n                updateDetails.status ? updateValue.recipe : newRecipe.recipe\n              }\n              rows=\"3\"\n              onChange={\n                updateDetails.status\n                  ? (e) => {\n                      updateOnChange(e, \"recipe\");\n                    }\n                  : (e) => {\n                      newOnChange(e, \"recipe\");\n                    }\n              }\n            ></textarea>\n          </div>\n\n          {/* Upload image */}\n\n          <div className=\"form-group\">\n            <label for=\"recipe-image\">Upload Food's Image</label>\n            <input\n              type=\"file\"\n              name=\"image\"\n              className=\"form-control-file\"\n              id=\"image\"\n              onChange={(e) => {\n                const image = e.target.files[0];\n                setRecipeImage(image);\n              }}\n            />\n          </div>\n\n          <div>{error && <p className=\"text-danger\"> {error} </p>}</div>\n          <div>{success && <p className=\"text-success\"> {success} </p>}</div>\n          <button\n            type=\"submit\"\n            className=\"btn btn-primary\"\n            onClick={\n              updateDetails.status\n                ? (e) => {\n                    updateRecipe(e);\n                  }\n                : (e) => {\n                    createNewRecipe(e);\n                  }\n            }\n          >\n            {updateDetails.status ? \"Update the Recipe\" : \"Add New Recipe\"}\n          </button>\n        </form>\n      </div>\n\n      {/* Table */}\n      <div>\n        <br />\n        <div className=\"container-lg\">\n          <h2>Recipes</h2>\n          <table className=\"table table-bordered\">\n            <thead className=\"thead-dark\">\n              <tr>\n                <th scope=\"col\"> Food Preview </th>\n                <th scope=\"col\">Food Name</th>\n                <th scope=\"col\">Ingredients</th>\n                <th scope=\"col\">Recipe</th>\n                <th scope=\"col\">Actions</th>\n              </tr>\n            </thead>\n            <tbody>\n              {recipes.map((recipe) => (\n                <tr key={recipe.id}>\n                  <td>\n                    <img\n                      src={storage.getFilePreview(recipe.image, 150, 100)}\n                      alt=\"recipe\"\n                    />\n                  </td>\n                  <td>{recipe.name}</td>\n                  <td>{recipe.ingredients}</td>\n                  <td>{recipe.recipe}</td>\n\n                  <td className=\"d-flex border-bottom-0 border-right-0 border-left-0\">\n                    <button\n                      onClick={() => deleteRecipe(recipe.$id, recipe.image)}\n                      type=\"button\"\n                      class=\"btn btn-danger mx-1\"\n                    >\n                      <i class=\"fas fa-trash \"></i>\n                    </button>\n                    <button\n                      onClick={() => {\n                        setUpdateDetails({\n                          status: true,\n                          id: recipe.$id,\n                        });\n                        updateForm(recipe);\n                      }}\n                      type=\"button\"\n                      class=\"btn btn-success mx-1\"\n                    >\n                      <i class=\"fas fa-pen\"></i>\n                    </button>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Recipe;\n"]},"metadata":{},"sourceType":"module"}